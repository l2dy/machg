<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Using an External Mercurial Version</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<meta name="hatver" content="v2 R6"/>
<meta name="builddefid" content="4111"/>
<meta name="topicid" content="27594"/>
<meta name="Keywords" content="external Mercurial, Mercurial binary, Advanced Preferences"/>
<!-- do not translate -->
<meta name="Keywords" content="MacHg, Mercurial" />
<!-- end do not translate -->
<meta name="description" content="How to change Mecurial version."/>
<meta name="template" content="2031"/>
<meta name="pagetype" content="Task"/>
<meta name="project" content="MacHgHelp"/>
<meta name="release" content=""/>
<meta name="projectcomponent" content="SafariSnow"/>
<link href="../sty/task.css" rel="stylesheet" type="text/css" media="all"/>
<link href="../sty/print.css" rel="stylesheet" type="text/css" media="print"/>
</head>

<body id="apple-pd">
<!--top navigation area-->

<div id="navbox" class="gradient"> <a name="UsingExternalMercurialVersion"></a>

   <div id="navleftbox"> <a class="navlink_left" href="help:anchor='access' bookID=MacHg Help">Home</a> </div>

   <div id="navrightbox"> <a class="navlink_right" href="help:anchor='xall' bookID=MacHg Help">Index</a> </div>
</div>
<!--page head-->

<div id="headerbox">

   <div id="iconbox"> <img id="iconimg" src="../gfx/hgicon.png" alt="MacHg icon" height="32" width="32"/> </div>

   <div id="pagetitle">
      <h1>Using an External Mercurial Version</h1>
   </div>
</div>

<p>MacHg includes its own slightly modified version of Mercurial. There are several small but important changes which have been added to this version of Mercurial. Largely they center around changes which are important for GUI clients but might not be suitable for the main Mercurial software. Note I (Jason Harris) have submitted all changes back to the main Mercurial project whenever possible or applicable. You can consult the source code of MacHg for any changes to the included Mercurial binaries to see the changes, but some of the most important changes are to do with the handling of temporary files Mercurial creates. In MacHg it's important that these temporary files can be easily ignored using the apple OSX FSEvents manager to reduce updates and possible race conditions.
</p>
<p>
However some developers and other people might like to experiment with using a different version of Mercurial. Previously, I had included such a GUI option inside MacHg. However, despite multiple warnings users who experimented with this option were having problems. Thus upon reflection I removed the GUI option in MacHg to specify using a different Mercurial. Moreover, anyone who knows how to patch Mercurial can easily change the version included in MacHg for themselves.)</p>

<div class="task-box-spacing">
   <div class="task-box-frame">
      <h2>To use an External Mercurial Version:</h2>
      <ol>
         <li>
            <p>Patch the new Mercurial binaries with the appropriate patches that are present in the MacHg repository.</p>
         </li>
         <li>
            <p>Add the extensions included in MacHg.app/Contents/PlugIns/LocalMercurial/hgext/ to your new Mercurial layout. </p>
         </li>
         <li>
            <p>Open the MacHg.app application package and replace the mercurial binaries at: /MacHg.app/Contents/PlugIns/LocalMercurial with your new patched version of Mercurial.</p>
         </li>
      </ol>
   </div>
</div>

<div class="important">
   <p> <span class="important-prefix">Important:</span> The external Mercurial binaries must at a minimum have the patches to do with the temporary file handling (see changeset c5cdee75ac13). Changesets 3055d12c916d, 8770a011d235, and 27871ee06734 are also highly recommended but not essential.</p>
</div>


<div class="important">
   <p> <span class="important-prefix">Important:</span> The external Mercurial must have the exact same extensions included in it that the Mercurial included with MacHg uses. Moreover these modified extensions need to be placed in the extensions folder of the external Mercurial. Specifically you must copy into the external Mercurial extensions folder the following extensions:</p>
        <ol>
         <li>
            <p>MacHg.app/Contents/PlugIns/LocalMercurial/hgext/combinedinfo.py</p>
         </li>
         <li>
            <p>MacHg.app/Contents/PlugIns/LocalMercurial/hgext/cedit/</p>
         </li>
         <li>
            <p>MacHg.app/Contents/PlugIns/LocalMercurial/hgext/collapse.py</p>
         </li>
         <li>
            <p>MacHg.app/Contents/PlugIns/LocalMercurial/hgext/histedit</p>
         </li>
      </ol>
</div>

</body>
</html>